# some codes for debugging the arduino serial connection. This has proven to be quite a pest
import struct, serial, time
import numpy as np
NUM_PIXELS = 100
dev = serial.Serial('/dev/ttyUSB0', 115200, timeout=1)
time.sleep(5)

pixels = np.array([[  0,   0,   0,   0,   0,   0,   0,   1,   2,   3,   6,  10,  15,
         23,  32,  42,  54,  66,  78,  88,  98, 105, 110, 115, 117, 119,
        121, 122, 123, 124, 126, 127, 129, 131, 133, 135, 137, 139, 141,
        144, 147, 151, 155, 159, 164, 169, 173, 177, 180, 182, 182, 180,
        177, 173, 169, 164, 159, 155, 151, 147, 144, 141, 139, 137, 135,
        133, 131, 129, 127, 126, 124, 123, 122, 121, 119, 117, 115, 110,
        105,  98,  88,  78,  66,  54,  42,  32,  23,  15,  10,   6,   3,
          2,   1,   0,   0,   0,   0,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,   1,   2,   3,   6,  10,  15,
         23,  32,  42,  54,  66,  78,  88,  98, 105, 110, 115, 117, 119,
        121, 122, 123, 124, 126, 127, 129, 131, 133, 135, 137, 139, 142,
        145, 148, 152, 157, 162, 167, 172, 178, 182, 185, 187, 187, 185,
        182, 178, 172, 167, 162, 157, 152, 148, 145, 142, 139, 137, 135,
        133, 131, 129, 127, 126, 124, 123, 122, 121, 119, 117, 115, 110,
        105,  98,  88,  78,  66,  54,  42,  32,  23,  15,  10,   6,   3,
          2,   1,   0,   0,   0,   0,   0,   0,   0],
       [  0,   0,   0,   0,   0,   0,   0,   1,   2,   3,   6,  10,  15,
         23,  32,  42,  54,  66,  78,  88,  98, 105, 110, 115, 117, 119,
        121, 122, 123, 124, 126, 127, 129, 131, 132, 134, 136, 138, 140,
        142, 145, 148, 152, 155, 159, 163, 167, 170, 173, 174, 174, 173,
        170, 167, 163, 159, 155, 152, 148, 145, 142, 140, 138, 136, 134,
        132, 131, 129, 127, 126, 124, 123, 122, 121, 119, 117, 115, 110,
        105,  98,  88,  78,  66,  54,  42,  32,  23,  15,  10,   6,   3,
          2,   1,   0,   0,   0,   0,   0,   0,   0]], dtype=np.uint8)

dev.write(struct.pack(f'>{NUM_PIXELS*3}B', *pixels.T.flatten()))
dev.close()
